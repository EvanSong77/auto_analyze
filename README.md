# Auto Analyze - 增强多智能体数据分析系统

## 项目概述

Auto Analyze 是一个基于多智能体协作的增强数据分析系统，专门设计用于处理和分析结构化数据（如CSV、Excel文件），并生成详细的HTML分析报告。系统采用模块化架构，整合了文件处理、代码执行、智能分析和报告生成等功能。

### 核心特性

- **多智能体协作分析**: 基于角色分工的智能体系统协同工作
- **自动化数据处理**: 支持多种文件格式的自动解析和处理
- **代码执行引擎**: 内置Jupyter执行环境，支持Python代码动态执行
- **HTML报告生成**: 自动生成美观、交互式的分析报告
- **工具化架构**: 模块化的工具系统，支持功能扩展

## 技术架构

### 核心模块

- **`main.py`**: 系统主入口，提供命令行接口
- **`core/agent/`**: 智能体系统核心模块
  - `enhanced_system.py`: 增强分析系统主控
  - `multi_agent_system.py`: 多智能体协作框架
  - `report_generator.py`: HTML报告生成器
  - `collaboration.py`: 智能体协作机制
- **`core/tool_manager.py`**: 工具管理系统
- **`core/filesystem.py`**: 文件系统管理器
- **`core/jupyter_execution.py`**: Jupyter执行引擎
- **`core/model_client.py`**: 模型客户端接口

### 配置系统

- **`config.yaml`**: 主配置文件（模型、服务器、执行参数）
- **`schemas/config.py`**: 配置数据模型和验证

### 数据目录

- **`data/`**: 存储分析数据和生成的报告
  - `销售数据.csv`: 示例销售数据文件
  - `analysis_report.html`: 生成的HTML报告

## 快速开始

### 环境要求

- Python 3.8+
- Windows/Linux/macOS
- 网络连接（用于模型API调用）

### 安装依赖

```bash
# 安装项目依赖
pip install -r requirements.txt
```

### 运行系统

```bash
# 基本使用
python main.py "分析销售数据"

# 启用详细日志
python main.py -v "帮我分析销售数据，找出业绩最好的产品"
```

### 配置说明

系统使用 `config.yaml` 文件进行配置，主要配置项包括：

- **模型配置**: DeepSeek V3 和 GLM-4V 模型端点
- **服务器配置**: 本地服务端口设置
- **执行配置**: 超时时间、内存限制等

## 核心功能

### 1. 文件处理工具

- **读取目录**: 扫描和分析工作目录结构
- **读取文件**: 支持多种文件格式（CSV、Excel、文本等）
- **数据处理**: 自动解析结构化数据

### 2. 代码执行引擎

- **Python代码执行**: 在隔离环境中执行数据分析代码
- **可视化支持**: 支持图表生成和数据可视化
- **错误处理**: 完善的异常处理和结果捕获

### 3. 多智能体分析

- **任务分配**: 根据用户查询自动分配分析任务
- **协作分析**: 多个智能体协同工作，提高分析质量
- **结果整合**: 综合各智能体的分析结果

### 4. 报告生成

- **HTML报告**: 生成交互式HTML分析报告
- **可视化展示**: 包含图表、统计信息和关键指标
- **错误报告**: 分析失败时生成详细的错误报告

## 开发指南

### 项目结构

```
├── main.py                 # 主程序入口
├── config.yaml            # 配置文件
├── core/                  # 核心模块
│   ├── agent/            # 智能体系统
│   ├── filesystem.py     # 文件系统管理
│   ├── tool_manager.py   # 工具管理
│   └── ...
├── data/                 # 数据目录
├── schemas/             # 配置模式
└── utils/               # 工具函数
```

### 添加新工具

1. 在 `tool_manager.py` 中创建新的 `Tool` 子类
2. 实现 `execute()` 和 `get_schema()` 方法
3. 在 `ToolManager._register_default_tools()` 中注册工具

### 扩展分析功能

1. 在 `core/agent/` 下创建新的智能体模块
2. 实现特定的分析逻辑
3. 集成到 `EnhancedMultiAgentSystem` 中

## 使用示例

### 基本数据分析

```bash
python main.py "分析销售数据，找出3月份业绩最好的产品"
```

### 自定义分析任务

```bash
python main.py "帮我分析数据中的销售趋势和区域分布情况"
```

## 故障排除

### 常见问题

1. **API连接失败**: 检查网络连接和模型端点配置
2. **文件读取错误**: 确认数据文件路径和权限
3. **内存不足**: 调整执行配置中的内存限制

### 日志查看

启用详细日志模式查看执行过程：

```bash
python main.py -v "分析查询"
```

## 贡献指南

欢迎提交问题报告和功能改进建议。请确保：

- 代码符合项目编码规范
- 添加适当的测试用例
- 更新相关文档

## 许可证

本项目采用 MIT 许可证。

---

*最后更新: 2025年10月15日*